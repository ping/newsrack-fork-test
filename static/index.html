<!--
Copyright (c) 2022 https://github.com/ping/

This software is released under the GNU General Public License v3.0
https://opensource.org/licenses/GPL-3.0
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="referrer" content="same-origin"/>
    <meta name="robots" content="noindex"/>
    <meta name="description" content="An online newsrack of periodicals for your ereader">
    <link rel="preload" href="lunr.json" as="fetch" crossorigin="anonymous" />
    <link rel="icon" type="image/svg+xml" href="favicon.svg"/>
    <title>News Rack</title>
    <style>
        {css}
    </style>
    <script src="https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js" type="application/javascript" defer
        integrity="sha256-DFDZACuFeAqEKv/7Vnu1Tt5ALa58bcWZegGGFNgET8g=" crossorigin="anonymous"></script>
</head>
<body>
    <script type="application/javascript">
    // stupid workaround instead of relying on screen size
    // to increase font size for non-kindle devices
    if (navigator.userAgent.indexOf("Mozilla/5.0 (X11") < 0)
        document.body.classList.add("nonkindle");
    </script>

    <h1>
        <img src="favicon.svg" alt="icon">
        News Rack
    </h1>
    <main>
        <div id="search-form-container">
            <form id="search-form">
            <input type="text" name="search-text" id="search-text" disabled
                   data-placeholder="Search in titles 'title:example' / articles 'articles:example' / tags 'tags:example'"
                   placeholder="Preparing search...">
            <input type="submit" name="Search" id="search-button" value="Search" disabled>
            </form>

            <span id="search-info"><a href="https://lunrjs.com/guides/searching.html">Search syntax</a></span>
        </div>
        {listing}
    </main>
    <footer>
        <a title="Combined OPDS" href="{catalog}">Combined OPDS</a>
        <div class="meta">
            {source_link}
            <div class="refreshed-info">
                Generated <span id="refreshed_dt" data-refreshed-date="{refreshed_ts}">at {refreshed_dt:%-d %B, %Y %-I:%M%p %z}</span>, and took about {elapsed}.
            </div>
        </div>
    </footer>
    <script type="application/javascript">{js}</script>
</body>
</html>